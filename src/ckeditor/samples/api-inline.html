<!DOCTYPE html>
<!--
Copyright (c) 2003-2011, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
-->
<html>
<head>
	<meta charset="utf-8">
	<title>API Usage &mdash; CKEditor Sample</title>
	<script src="../ckeditor.js"></script>
	<link href="sample.css" rel="stylesheet">
	<style>

		/* CKEditor editables are automatically set with the "cke_editable" class. */
		.cke_editable
		{
			border: 3px dotted orange !important;
		}

		/* Show table border lines */
		table, td, caption
		{
			border: 1px solid gray;
			border-collapse: collapse;
		}

		hr
		{
			border: 1px solid gray;
			border-style: solid none none;
			margin: 20px 0 10px;
		}

		#editor1,#editor2
		{
			margin: 20px 0;
			padding: 10px;
		}

		#main
		{
			width: 53%;
			float: left;
		}

		#tools
		{
			width: 45%;
			padding-left: 20px;
			float: right;
		}
	</style>
	<script>

		CKEDITOR.config.extraPlugins =
			'about,' +
			'basicstyles,' +
			'bidi,' +
			'blockquote,' +
			'selectionmark,' +
			'clipboard,' +
			'colorbutton,' +
			'colordialog,' +
			'div,' +
			'elementspath,' +
			'enterkey,' +
			'entities,' +
			'find,' +
			'flash,' +
			'floatingspace,' +
			'font,' +
			'format,' +
			'forms,' +
			'horizontalrule,' +
			'image,' +
			'iframe,' +
			'indent,' +
			'justify,' +
			'link,' +
			'list,' +
			'maximize,' +
			'pagebreak,' +
			'pastefromword,' +
			'pastetext,' +
			'removeformat,' +
			'scayt,' +
			'toolbar,' +
			'selectall,' +
			'showblocks,' +
			'showborders,' +
			'smiley,' +
			'specialchar,' +
			'stylescombo,' +
			'table,' +
			'templates,' +
			'undo,' +
			'wsc';

	</script>
	<script>

		function Log( text )
		{
			window.console && console.log( text );

			var logger = document.getElementById( 'log' );
			logger.value && (logger.value += '\n');
			logger.value += (new Date().toLocaleTimeString()) + ' > ' + text;
			logger.scrollTop = logger.scrollHeight;
		}

		CKEDITOR.on( 'inline', function ( ev )
		{
			// This specific instance settings can be customized through the ev.data.config object.

			// Return false to not create a CKEditor for this element.
			// if ( ev.data.element.getId() == 'header' )
			//	return false;		// or ev.cancel();

			Log( 'Creating CKEditor instance for ' + ev.data.element.getName() + '#' + ev.data.element.getId() );
		} );

		CKEDITOR.on( 'instance', function ( ev )
		{
			Log( 'Created CKEditor instance name "' + ev.editor.name + '"' );
		} );

		CKEDITOR.on( 'currentInstance', function ()
		{
			var current = CKEDITOR.currentInstance;

			if ( current )
				Log( 'Current instance: ' + current.name );
			else
				Log( 'No editor instance active' );

			var buttons = document.getElementById( 'buttons' ).getElementsByTagName( 'input' );
			for ( var i = 0; i < buttons.length; i++ )
				buttons[i].disabled = !current;
		} );

		function InsertHTML()
		{
			// Get the editor instance that we want to interact with.
			var editor = CKEDITOR.currentInstance;
			var value = document.getElementById( 'htmlArea' ).value;

			// Check the active editing mode.
			if ( editor.mode == 'wysiwyg' )
			{
				// Insert HTML code.
				// http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#insertHtml
				editor.insertHtml( value );
			}
			else
				alert( 'You must be in WYSIWYG mode!' );
		}

		function InsertText()
		{
			// Get the editor instance that we want to interact with.
			var editor = CKEDITOR.currentInstance;
			var value = document.getElementById( 'txtArea' ).value;

			// Check the active editing mode.
			if ( editor.mode == 'wysiwyg' )
			{
				// Insert as plain text.
				// http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#insertText
				editor.insertText( value );
			}
			else
				alert( 'You must be in WYSIWYG mode!' );
		}

		function SetContents()
		{
			// Get the editor instance that we want to interact with.
			var editor = CKEDITOR.currentInstance;
			var value = document.getElementById( 'htmlArea' ).value;

			// Set editor contents (replace current contents).
			// http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#setData
			editor.setData( value, function() { editor.focus(); } );
		}

		function GetContents()
		{
			// Get the editor instance that you want to interact with.
			var editor = CKEDITOR.currentInstance;

			// Get editor contents
			// http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#getData
			alert( editor.getData() );
		}

		function ExecuteCommand( commandName )
		{
			// Get the editor instance that we want to interact with.
			var editor = CKEDITOR.currentInstance;

			// Check the active editing mode.
			if ( editor.mode == 'wysiwyg' )
			{
				// Execute the command.
				// http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#execCommand
				editor.execCommand( commandName );
			}
			else
				alert( 'You must be in WYSIWYG mode!' );
		}

		function CheckDirty()
		{
			// Get the editor instance that we want to interact with.
			var editor = CKEDITOR.currentInstance;
			// Checks whether the current editor contents present changes when compared
			// to the contents loaded into the editor at startup
			// http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#checkDirty
			alert( !!editor.checkDirty() );
		}

		function ResetDirty()
		{
			// Get the editor instance that we want to interact with.
			var editor = CKEDITOR.currentInstance;
			// Resets the "dirty state" of the editor (see CheckDirty())
			// http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#resetDirty
			editor.resetDirty();
			alert( 'The "IsDirty" status has been reset' );
		}

		function Focus()
		{
			CKEDITOR.currentInstance.focus();
		}

		function Destroy()
		{
			var editor = CKEDITOR.currentInstance;
			var editable = editor.editable();
			editor.destroy();
			editable.setAttribute( 'contenteditable', false );
		}

	</script>

</head>
<body>
	<h1 class="samples">
		CKEditor Sample &mdash; Using CKEditor JavaScript API
	</h1>
	<div class="description">
	<p>
		This sample shows how to use the
		<a class="samples" href="http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html">CKEditor JavaScript API</a>
		to interact with inline editor instances at runtime.
	</p>
	<p>
		For details on how to create this setup check the source code of this sample page.
	</p>
	</div>

		<div id="main">
			<div id="editor1" contenteditable="true">
				<p>This is some <strong>sample text</strong>. You are using <a href="http://ckeditor.com/">CKEditor</a>. </p>
			</div>
			<div id="editor2" contenteditable="true">
				<h1><img alt="" src="http://a.cksource.com/c/1/inc/img/demo-little-red.jpg" style="margin-left: 10px; margin-right: 10px; float: left; width: 120px; height: 168px;">Little Red Riding Hood</h1>
				<p>
					"<b>Little Red Riding Hood</b>" is a famous <a href="http://en.wikipedia.org/wiki/Fairy_tale" title="Fairy tale">fairy tale</a> about a young girl's encounter with a wolf. The story has been changed considerably in its history and subject to numerous modern adaptations and readings.</p>
				<table align="right" border="1" cellpadding="1" cellspacing="1" style="width: 200px;">
					<caption>
						<strong>International Names</strong></caption>
					<tbody>
						<tr>
							<td>
								Chinese</td>
							<td>
								<i>小紅帽</i></td>
						</tr>
						<tr>
							<td>
								Italian</td>
							<td>
								<i>Cappuccetto Rosso</i></td>
						</tr>
						<tr>
							<td>
								Spanish</td>
							<td>
								<i>Caperucita Roja</i></td>
						</tr>
					</tbody>
				</table>
				<p>
					The version most widely known today is based on the <a href="http://en.wikipedia.org/wiki/Brothers_Grimm" title="Brothers Grimm">Brothers Grimm</a> variant. It is about a girl called Little Red Riding Hood, after the red <a href="http://en.wikipedia.org/wiki/Hood_%28headgear%29" title="Hood (headgear)">hooded</a> <a href="http://en.wikipedia.org/wiki/Cape" title="Cape">cape</a> or <a href="http://en.wikipedia.org/wiki/Cloak" title="Cloak">cloak</a> she wears. The girl walks through the woods to deliver food to her sick grandmother.</p>
				<p>
					A wolf wants to eat the girl but is afraid to do so in public. He approaches the girl, and she naïvely tells him where she is going. He suggests the girl pick some flowers, which she does. In the meantime, he goes to the grandmother's house and gains entry by pretending to be the girl. He swallows the grandmother whole, and waits for the girl, disguised as the grandmother.</p>
				<p>
					When the girl arrives, she notices he looks very strange to be her grandma. In most retellings, this eventually culminates with Little Red Riding Hood saying, "My, what big teeth you have!"<br>
					To which the wolf replies, "The better to eat you with," and swallows her whole, too.</p>
				<p>
					A <a href="http://en.wikipedia.org/wiki/Hunter" title="Hunter">hunter</a>, however, comes to the rescue and cuts the wolf open. Little Red Riding Hood and her grandmother emerge unharmed. They fill the wolf's body with heavy stones, which drown him when he falls into a well. Other versions of the story have had the grandmother shut in the closet instead of eaten, and some have Little Red Riding Hood saved by the hunter as the wolf advances on her rather than after she is eaten.</p>
				<p>
					The tale makes the clearest contrast between the safe world of the village and the dangers of the <a href="http://en.wikipedia.org/wiki/Enchanted_forest" title="Enchanted forest">forest</a>, conventional antitheses that are essentially medieval, though no written versions are as old as that.</p>
			</div>
		</div>

		<div id="tools">
		<p><textarea id="log" style="width: 100%; height: 100px;" readonly="readonly"></textarea></p>
		<div id="buttons">
			<input onclick="ExecuteCommand('bold');" type="button" value="Execute &quot;bold&quot; Command">
			<input onclick="ExecuteCommand('link');" type="button" value="Execute &quot;link&quot; Command">
			<input onclick="Focus();" type="button" value="Focus">
			<br><br>
			<input onclick="InsertHTML();" type="button" value="Insert HTML">
			<input onclick="SetContents();" type="button" value="Set Editor Contents">
			<input onclick="GetContents();" type="button" value="Get Editor Contents (XHTML)">
			<input onclick="Destroy();" type="button" value="Destroy Editor">
			<br>
			<textarea cols="100" id="htmlArea" rows="3">&lt;h2&gt;Test&lt;/h2&gt;&lt;p&gt;This is some &lt;a href="/Test1.html"&gt;sample&lt;/a&gt; HTML code.&lt;/p&gt;</textarea>
			<br>
			<br>
			<input onclick="InsertText();" type="button" value="Insert Text">
			<br>
			<textarea cols="100" id="txtArea" rows="3">   First line with some leading whitespaces.

Second line of text preceded by two line breaks.</textarea>
			<br>
			<br>
			<input onclick="CheckDirty();" type="button" value="checkDirty()">
			<input onclick="ResetDirty();" type="button" value="resetDirty()">
		</div>
		</div>
	<div id="footer">
		<hr>
		<p>
			CKEditor - The text editor for the Internet - <a class="samples" href="http://ckeditor.com/">http://ckeditor.com</a>
		</p>
		<p id="copy">
			Copyright &copy; 2003-2011, <a class="samples" href="http://cksource.com/">CKSource</a> - Frederico
			Knabben. All rights reserved.
		</p>
	</div>
</body>
</html>
